{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5f1918e1bd4074425c8c","webpack:///./index.js","webpack:///./main/draw.js","webpack:///./main/dimensions.js","webpack:///./main/blankSVG.js","webpack:///./main/scheduler/scheduler.js","webpack:///external \"Rx\"","webpack:///./main/scheduler/main.js","webpack:///./main/sharedResource.js","webpack:///./main/scheduler/intent.js","webpack:///./main/scheduler/model.js","webpack:///./main/scheduler/scheduler_globals.js","webpack:///./main/scheduler/view.js"],"names":["draw","require","dimensions","blankSVG","drawSchedule","load","module","exports","what","parent","settings","data","create","selectAll","keys","Object","is","len","length","applyArgs","Array","Function","apply","i","call","baseDimensions","width","height","margintop","arguments","undefined","marginright","marginBottom","marginLeft","sizeObject","margin","top","right","bottom","left","sizing","props","dim","forEach","value","index","prop","hasOwnProperty","d3local","size","select","append","attr","Rx","queueSubject","LOAD","BIND","PRE_BIND","dataBinder","type","transitions","onNext","time","Date","now","Queue","isEmpty","scheduleSubject","transitionState","dataModel","views","FINISH","masterTime","ignoreOld","x","backFromRenderStream","filter","stagedState","staged","queue","queueModel","acc","curr","Q","enqueue","transition","dequeue","queueStream","startWith","scan","skip","obj","singleStream","isArray","map","pre","preTransition","key","post","assign","mergeSubject","Observable","merge","state","flag","subscribe","transitionStage","pick","selector","document","querySelector","indexed","indices","collection","getProperty","request","collectionIndex","__queue__","shift","setLength","push","inArray","str","arr","word","toLowerCase","ReplaySubject","RENDER","packed","callIndex","stage","out","checkOut","packDataBind","update","next","packTransition","boundDOM","countObjectsOut","returnCount","PRE_RENDER","CALL_NEXT","dataView","binders","bound","callNext","n","namespace","empty","each","renderView","stack","callNextWithTime","trans"],"mappings":"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","file":"index.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Rx\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Rx\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grizzy\"] = factory(require(\"Rx\"));\n\telse\n\t\troot[\"grizzy\"] = factory(root[\"Rx\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5f1918e1bd4074425c8c\n **/","var draw = require('./main/draw');\nvar dimensions = require('./main/dimensions');\nvar blankSVG = require('./main/blankSVG');\nvar drawSchedule = require('./main/scheduler/scheduler').drawSchedule;\nvar load = require('./main/scheduler/scheduler').load;\n\n\nmodule.exports = {\n\tblankSVG : blankSVG,\n\tdraw : draw,\n\tdrawSchedule : drawSchedule,\n\tdimensions : dimensions,\n\tload : load\n};\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","/**\n * draw -> manages the heavy lifing of d3 by creating  a reusable\n * pattern to create graphics.  Note: if setting.data is `false`\n * parent object will bind only\n *\n * @param{String} (what) -> what will be picked in the selection \n * @param{Object::Array} (parent) -> the svg that will be render new\n *   images\n * @parm{Object} (settings) -> All of the functionality of the view of\n *   the d3.  must include properties data, and is.\n * example: \n *     draw(\"rect.range\", container, {\n *       data: rangez,\n *       is : {\n *         enter : (selection) => {\n *           return selection.enter().append(\"rect\")\n *             .attr({\n *               \"class\": (d, i) => \"range s\" + i,\n *               \"width\": w0,\n *               \"height\": height,\n *               \"x\": reverse ? lastScale : 0\n *             })\n *           .transition()\n *             .duration(duration)\n *             .attr({\n *               \"width\": w1,\n *               \"x\": reverse ? currentScale : 0\n *             });\n *         },\n *         postUpdate : (selection) => {\n *           return selection.transition()\n *             .duration(duration)\n *             .attr({\n *               \"x\": reverse ? currentScale : 0,\n *               \"width\": w1,\n *               \"height\": height\n *             });\n *         },\n *         exit : (selection) => {\n *           return selection.exit().remove();\n *         }\n *       }\n *     });\n */\n\nfunction draw(what, parent, settings){\n  let data = settings.data\n  , create = data === false ? parent : parent.selectAll(what)\n  , keys = Object.keys(settings.is)\n  , len = keys.length\n  , applyArgs;\n\n  if (!(data instanceof Array && data[1] instanceof Function)){\n    applyArgs = [data];\n  } else {\n    applyArgs = data;\n  }\n\n  if (data) {\n    create = create.data.apply(create, applyArgs);\n  }\n\n  for (var i = 0; i < len; i++){\n    create.call(settings.is[ keys[i] ]);  \n  }\n  return create;\n}\n\nmodule.exports = draw;\n\n\n/** WEBPACK FOOTER **\n ** ./main/draw.js\n **/","/**\n* dimensions -> follows the general d3 sizing rules with margins\n* the goal is have a cleaner way of coding the absolute width and \n* the dimensions the graph will fall in.\n*\n* @param{Object} (sizing) -> object of width, heigh, \n* margin{top,right,bottom,left}. if margin is left off then all\n* margins are set to zero.\n* example:\n* var SIZE = dimensions({\n*     width : window.innerWidth - 600,\n*     height : window.innerHeight*.9,\n*     margin:{top: 10, right: 30, bottom: 10, left: 20}\n* });\n*/\nfunction baseDimensions(width, height) {\n  var margintop = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n  var marginright = arguments.length <= 3 || arguments[3] === undefined ? 0 : arguments[3];\n  var marginBottom = arguments.length <= 4 || arguments[4] === undefined ? 0 : arguments[4];\n  var marginLeft = arguments.length <= 5 || arguments[5] === undefined ? 0 : arguments[5];\n\n  var sizeObject = {\n    margin : {\n      top: margintop, \n      right: marginright,\n      bottom: marginBottom,\n      left: marginLeft\n    },\n    width : width - marginLeft - marginright,\n    height : height - margintop - marginBottom\n  }\n\n  return sizeObject;\n}\n\nfunction dimensions(sizing) {\n  var props = ['width', 'height', 'margin'];\n  var dim = {};\n\n  props.forEach((value, index) => {\n    for (var prop in sizing) {\n\n      if (sizing.hasOwnProperty(value)) {\n        dim[index] = sizing[value]\n      } else {\n        dim[index] = undefined\n      }\n    }\n  });\n\n  if (dim[2] === undefined) {\n    dim[2] = {\n      top : 0,\n      right : 0,\n      bottom : 0,\n      left : 0,\n    }\n  }\n\n  return baseDimensions(dim[0], dim[1], dim[2].top, dim[2].right, \n                       dim[2].bottom,  dim[2].left);\n}\n\nmodule.exports = dimensions;\n\n\n/** WEBPACK FOOTER **\n ** ./main/dimensions.js\n **/","/**\n* blankSVG -> Creates a new, blank SVG to work on. follows d3 \n* conventions of calculating the sizy of the canvas\n*\n* @param{Number} (width) -> value of width\n* @param{Number} (height) -> value of height\n* @param{Object} (margin) -> object of top, bottom, left, right of Numbers\n* @param{String} (select) -> the id or class of the DOM selection\n* \n* example:\n* const margin = {top: 19.5, right: 19.5, bottom: 19.5, left: 39.5},\n*     width = 960 - margin.right,\n*     height = 500 - margin.top - margin.bottom;\n* \n* svg = new blankSVG(width, height, margin, '#chart')\n*/\n\nfunction blankSVG(d3local, size, select) {\n  select = select !== undefined ? select : 'body';\n\n  return d3local.select(select)\n    .append(\"svg\")\n    .attr({\n      \"width\" : (\n        size.width \n        + size.margin.left \n        + size.margin.right\n      ),\n      \"height\" : (\n        size.height\n        + size.margin.top\n        + size.margin.bottom\n      )\n    })\n    .append(\"g\")\n      .attr({\n        \"transform\": \"translate(\" \n          + size.margin.left \n          + \",\" \n          + size.margin.top \n          + \")\"\n      });\n}\n\nmodule.exports = blankSVG;\n\n\n/** WEBPACK FOOTER **\n ** ./main/blankSVG.js\n **/","var Rx = require('rx');\nvar {queueSubject} = require('./main');\nvar {\n  LOAD, BIND, PRE_BIND\n} = require('./scheduler_globals');\n\n/**\n * drawSchedule -> manages the heavy lifing of d3 by creating  a \n * reusable pattern to create graphics.  Note: if setting.data is \n * `false` parent object will bind only.  Should be returned in a \n * function.\n *\n * @param{String} (what) -> what will be picked in the selection \n * @param{Object::Array} (parent) -> the svg that will be render new\n *   images\n * @parm{Object} (settings) -> All of the functionality of the view of\n *   the d3.  must include properties data, and is.\n *\n * example: \n * (parentObject, data) => {\n *     return drawSchedule(\"rect.range\", parentObject, {\n *       data: data,\n *       is : {\n *         enter : (selection) => {\n *           return selection.enter().append(\"rect\")\n *             .attr({\n *               \"class\": (d, i) => \"range s\" + i,\n *               \"width\": w0,\n *               \"height\": height,\n *               \"x\": reverse ? lastScale : 0\n *             })\n *           .transition()\n *             .duration(duration)\n *             .attr({\n *               \"width\": w1,\n *               \"x\": reverse ? currentScale : 0\n *             });\n *         },\n *         update : (selection) => {\n *           return selection.transition()\n *             .duration(duration)\n *             .attr({\n *               \"x\": reverse ? currentScale : 0,\n *               \"width\": w1,\n *               \"height\": height\n *             });\n *         },\n *         exit : (selection) => {\n *           return selection.exit().remove();\n *         }\n *       }\n *     });\n *  }\n */\nfunction drawSchedule(what, parent, settings){\n  let data = settings.data\n  , create = data === false ? parent : parent.selectAll(what)\n  , keys = Object.keys(settings.is)\n  , len = keys.length\n  , is = settings.is\n  , applyArgs = undefined\n  , dataBinder;\n\n  if (!(data instanceof Array \n        && data[1] instanceof Function)){\n    applyArgs = [data];\n  } else {\n    applyArgs = data;\n  }\n\n  if (data) {\n    dataBinder = () => {\n      return create.data.apply(create, applyArgs);\n    }\n  } else {\n    dataBinder = () => {\n      return create;\n    }\n  }\n\n  return {\n    type: PRE_BIND,\n    // if problems up comment this out\n    // parent: create,\n    dataBinder,\n    is,\n    keys,\n    len\n  }\n}\n\n/**\n * load-> create a series of transition to occur in your visualization. \n * Each one will happen after the pervious one completes.\n *  \n * @param{Object} (transitions) -> any number of object created by\n *   a drawSchedule function\n */\nfunction load(...transitions){\n  queueSubject.onNext({\n    type: LOAD,\n    time: Date.now(),\n    transitions\n  });\n\n  return transitions;\n}\n\nmodule.exports = { drawSchedule, load };\n\n\n\n/** WEBPACK FOOTER **\n ** ./main/scheduler/scheduler.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Rx\"\n ** module id = 5\n ** module chunks = 0\n **/","var Rx = require('rx');\nvar { Queue , isEmpty } = require('../sharedResource');\n\nvar { queueSubject, scheduleSubject } = require('./intent')\nvar { transitionState, dataModel } = require('./model')\nvar { views } = require('./view')\nvar {\n  LOAD,\n  PRE_BIND,\n  FINISH\n} = require('./scheduler_globals');\n\nvar masterTime = 0;\n\n// filters out process that should be canceled if a user\n// has updated the data of the application\nconst ignoreOld = (x) => x.time === masterTime;\n\nconst backFromRenderStream = scheduleSubject\n  .filter(ignoreOld);\n\nconst stagedState = {\n  staged: {},\n  queue: new Queue(),\n  time: 0\n};\n\nfunction queueModel(acc, curr) {\n  if (curr.type === LOAD) {\n    let Q = new Queue();\n\n    masterTime = curr.time\n\n    curr.transitions.forEach( transition => {\n      Q.enqueue(transition)\n    });\n\n    return {\n      staged: Q.dequeue(),\n      queue: Q,\n      time: curr.time\n    }\n  } \n\n  else if (curr.type === FINISH) {\n    let Q = acc.queue;\n\n    if (Q.length > 0) {\n      return {\n        staged: Q.dequeue(),\n        queue: Q,\n        time: acc.time   \n      }\n    } else {\n      return stagedState;\n    }\n  }\n}\n\n// this will also have a step to call for another \n// dequeued item when all transitions are done\n// for clarity startWith is used with a templete of\n// what the model is.  Skip prevents that empty model\n// from being streamed to the next stage.\nconst queueStream = queueSubject\n  .startWith(stagedState)\n  .scan(queueModel)\n  .skip(1)\n  .filter(obj => !isEmpty(obj.staged));\n  \n\n// shape object if it is a plain object\nconst singleStream = queueStream\n  .filter(staged => !Array.isArray(staged))\n  .map(preTransition => {\n    let pre = preTransition.staged\n    let transitions = pre.is;\n    let keys = Object.keys(transitions)\n    let is = {};\n\n    keys.forEach(key => {\n      is[key] = [transitions[key]];\n    })\n\n    let post = Object.assign({}, pre, {\n      time: preTransition.time,\n      dataBinder: [pre.dataBinder],\n      is\n    })\n\n    return post;\n  });\n\nconst mergeSubject = Rx.Observable.merge( \n  singleStream, backFromRenderStream\n);\n\nmergeSubject\n  .startWith(transitionState)\n  .scan(dataModel)\n  .skip(1)\n  // if transitions are still out, filter stops\n  // state from returning\n  .filter(state => !state.flag)\n  .subscribe((transitionStage) => {\n    views(transitionStage);\n  }); \n\n\nmodule.exports = { queueSubject };\n\n\n\n/** WEBPACK FOOTER **\n ** ./main/scheduler/main.js\n **/","\n/**\n* pick -> shorthand for document.querySelector(selector)\n*/\nconst pick = (selector) => document.querySelector(selector);\n\n/**\n* indexed -> takes a list of indices and gets them from a \n*   collection\n* @param{Array::Numbers} (indices) -> index list\n* @param{Array::Arrays/Objects} (collection) -> collection to get \n*   values\n* @param{Function} (getProperty) -> callback to get value from\n*   collection\n* @return{Array/Array::Objects/Array::Array}\n*/\nfunction indexed(indices, collection, getProperty) {\n  let request = new Array(indices.length);\n\n  if (arguments.length === 2){\n      indices.forEach( (collectionIndex, i) => {\n        request[i] = collection[collectionIndex];\n      });\n      \n  } else {\n      indices.forEach( (collectionIndex, i) => {\n        request[i] = getProperty(collection[collectionIndex]);\n      });\n  }\n\n  return request;\n};\n\n/**\n* Queue -> very very basic queue\n*/\nclass Queue {\n  constructor() {\n    this.__queue__ = new Array();\n    this.length = this.__queue__.length;\n  }\n  \n  setLength() {\n    this.length = this.__queue__.length;\n  }\n\n  dequeue() {\n    let value = this.__queue__.shift();\n    this.setLength();\n    return value;\n  }\n\n  enqueue(x) {\n    this.__queue__.push(x);\n    this.setLength();\n  }\n}\n\n// check if string is in the selected array\nfunction inArray(str, arr) {\n  for (var i = 0; i < arr.length; i++){\n    let word = arr[i]\n    if (str.toLowerCase() === word.toLowerCase()) {\n      return true\n    }  \n  }\n}\n\nfunction isEmpty(obj){\n  return Object.keys(obj).length === 0 ||\n    obj.length === 0;\n}\n\nmodule.exports = {indexed, Queue, inArray, isEmpty, pick};\n\n\n/** WEBPACK FOOTER **\n ** ./main/sharedResource.js\n **/","var Rx = require('rx');\n\nmodule.exports = {\n\tqueueSubject : new Rx.ReplaySubject(1),\n\tscheduleSubject : new Rx.ReplaySubject(1)\n};\n\n\n/** WEBPACK FOOTER **\n ** ./main/scheduler/intent.js\n **/","var { Queue } = require('../sharedResource');\nvar {\n  RENDER,\n  PRE_BIND,\n  BIND\n} = require('./scheduler_globals');\n\n// state is held in this object\n// While javascript is dynamic, most implementations prefer\n// being explicit\nmodule.exports.transitionState = {\n  packed: [],\n  dataBinder: [],\n  parent: [], \n  keys: [],\n  is: {},\n  len: 0,\n  flag: false,\n  time: undefined,\n  callIndex: -1,\n  type: 'base',\n  stage: '',\n  out: undefined\n};\n\n// helper function to report how many transition\n// are out to be renders\nfunction checkOut(obj) {\n  return obj !== undefined ? obj.length : 0;\n}\n\n\nfunction packDataBind(state, update) {\n\tlet {dataBinder, create, keys, is, len, time} = update;\n\n \tlet next = {\n    packed: [],\n    dataBinder: dataBinder,\n    parent: create,\n    keys: keys,\n    is: is,\n    len: len,\n    flag: false,\n    callIndex: -1,\n    time: time,\n    type: BIND,\n    stage: 'post-bind',\n    out: 0\n\t};\n\n\treturn next;\n}\n\nfunction packTransition(state, boundDOM) { \n  let i, transition; \n  \n  // check if there are transition still out for process\n  if (boundDOM.hasOwnProperty('returnCount')) {\n    let countObjectsOut = state.out - boundDOM.returnCount;\n\n    if (countObjectsOut > 0) {\n\n      state = Object.assign({}, state, {\n        out: countObjectsOut,\n        flag: true\n      });\n\n      return state;\n    } \n  }\n\n  //\n  // when there are no outstanding transitions\n  // get current transitions\n  //\n  i = (state.callIndex += 1);\n  transition = state.is[state.keys[i]];\n\n  if (state.callIndex === 0) {\n\n    return Object.assign({}, state, {\n      packed: [{\n        parent:boundDOM.parent,\n        transition: transition,\n        time: state.time\n      }],\n      parent: boundDOM.parent,\n      out: checkOut(transition),\n      stage: 'start',\n      flag: false,\n      type: RENDER\n    });\n  }\n\n  else if (state.callIndex < state.len) {\n\n    return Object.assign({}, state, {\n      packed: [{\n        parent:state.parent,\n        transition: transition,\n        time: state.time\n      }],\n      stage: 'continue',\n      out: checkOut(transition),\n      flag: false,\n      type: RENDER\n    });\n  } \n\n  else {\n    return Object.assign({}, state, {\n      packed: [],\n      stage: 'empty',\n      out: checkOut(transition),\n      flag: false,\n      type: RENDER\n    });\n  }\n}\n\nmodule.exports.dataModel =  function (state, update) {\n  //stage where data gets passed down\n  let type = update !== undefined ? update.type : 'done';\n  // console.log('state',state,'\\n','update',update)\n  switch (type) {\n    case PRE_BIND:\n    \treturn packDataBind(state, update);\n    \tbreak\n\n    case RENDER:\n      return packTransition(state, update)\n    \tbreak;\n\n    case 'done':\n    \t// nothing is happening right now. test later to make\n    \t// sure it stays the same.\n    \tbreak\n  \t\n  \tdefault:\n    \tbreak; \n   }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./main/scheduler/model.js\n **/","// global variables for the schedule module\nmodule.exports =  {\n\tLOAD : 'load',\n\n\tPRE_BIND : 'pre-bind',\n\tBIND : 'bind',\n\n\tPRE_RENDER : 'pre-render',\n\tRENDER : 'render',\n\n\tFINISH : 'finish',\n\n\tCALL_NEXT : 'call-next'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./main/scheduler/scheduler_globals.js\n **/","var {queueSubject, scheduleSubject} = require('./intent');\nvar { \n  BIND,\n  RENDER,\n  FINISH,\n  PRE_RENDER,\n  CALL_NEXT\n} = require('./scheduler_globals');\n\n// views are in this case where the side effects are.  This is where\n// d3 either is binding data to the DOM or rendering updates\n\n// binds data to the dom if any and returns the parent object\n// to apply transitions on.\nfunction dataView(state){\n  let binders = state.dataBinder;\n  let len = binders.length;\n  let parent = [];\n\n  for (let i = 0; i < len; i++) {\n    let bound = binders.shift();\n    parent.push(bound());\n  }\n\n  scheduleSubject.onNext({\n    type: RENDER,\n    stage: PRE_RENDER,\n    parent,\n    time: state.time\n  })\n}\n\n/**\n* callNext -> passed to a d3 transision through \n* d3.(select).call pushes a value to scheduleSubject\n* specific to d3\n* onNext\n*/\nfunction callNext(time) {\n  return (transition) => {\n    let n = 0;\n    let next = () => {\n      scheduleSubject.onNext({\n        type: RENDER,\n        stage: CALL_NEXT,\n        returnCount: 1,\n        time: time\n      });\n    }\n\n    if (transition.namespace === undefined || transition.empty()) {    \n      return next();\n    }\n\n    transition \n      .each(() => ++n) \n      .each(\"end\", () => { \n        if (!--n) {\n          next();\n        }\n      }); \n  }\n}\n\n// render function renders a view or if pushes onNext to\n// queueSubject if there is none to render\nfunction renderView(state) {\n  if (state.callIndex < state.len && state.parent !== undefined) {\n    let stack = state.packed;\n    stack.forEach(stage => {\n      let parent = stage.parent;\n      let transitions = stage.transition\n      let len = transitions.length;\n      \n      // the transition contains the onNext to move\n      // the transition forward uses scheduleSubject like \n      // dataView\n      for (let i = 0; i < len; i++) {\n        let callNextWithTime = callNext(stage.time)\n        let trans = transitions.shift();\n        parent[i].call(trans, callNextWithTime);        \n      }\n    });\n  } \n\n  else {\n    queueSubject.onNext({type: FINISH, time: state.time})\n  }\n}\n\n// this step distinguishes it is a data binding step out to process\n// or a rendering step\nfunction views(state) {\n  let type = state !== undefined ? state.type : 'done';\n\n  if (type === BIND && state.dataBinder.length > 0) {\n    dataView(state)  \n  }\n  else if (type === RENDER) {\n    renderView(state) \n  }\n  else {\n    return false\n  }\n}\n\nmodule.exports = {views};\n\n\n\n/** WEBPACK FOOTER **\n ** ./main/scheduler/view.js\n **/"],"sourceRoot":""}